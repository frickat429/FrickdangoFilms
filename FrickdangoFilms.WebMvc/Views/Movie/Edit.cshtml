@model FrickdangoFilms.Models.Movies.MovieEditViewModel

@{
    ViewData["Title"] = "Edit Movie";
}

<h1 class="display-4">Edit Movie</h1>
<hr />

<div asp-validation-summary="ModelOnly" class="text-danger"></div>

<form asp-action="Edit" method="post" class="row g-3">
    <div class="col-md-6">
        <label asp-for="MovieTitle" class="form-label">Movie Title</label>
        <input asp-for="MovieTitle" class="form-control">
        <span asp-validation-for="MovieTitle" class="text-danger"></span>
        </div>

        <div class="col-md-12">
            <label asp-for="MovieDescription" class="form-label">Description</label>
            <textarea asp-for="MovieDescription" class="form-control" rows="4"></textarea>
    using Microsoft.EntityFrameworkCore.Metadata.Internal;
            <span asp-validation-for="MovieDescription" class="text-danger"></span>
        </div>

        <div class="col-md-4">
            <label asp-for="RuntimeInMinutes" class="form-label">Runtime</label>
            <input asp-for="RuntimeInMinutes" class="form-control">
            <span asp-validation-for="RuntimeInMinutes" class="text-danger"></span>
        </div>

        <div class="col-md-6">
            <label asp-for="GenreId" class="form-label"></label>
            <select asp-for="GenreId" class="form-select">
                <option value="">--Select Genre--</option>
                @foreach (var genre in ViewBag.Genres as IEnumerable<SelectListItem>)
                {
                    var isSelected = genre.Value == Model.GenreId.ToString();
                    if (isSelected)
                    {
                    <option value="@genre.Value" Selected>@genre.Text</option>

                    }
                    else 
                    {
                        <option value="@genre.Value">@genre.Text</option>
                    }
                }
            </select>
            <span asp-validation-for="GenreId" class="text-danger"></span>
        </div>

  <div class="col-md-6">
    <label asp-for="MPAA_RatingId" class="form-label"></label>
    <select asp-for="MPAA_RatingId" class="form-select">
      <option value="">--Select Rating--</option>
      @foreach (var rating in ViewBag.Ratings as IEnumerable<SelectListItem>)
      {
       var isSelected = rating.Value == Model.GenreId.ToString(); 
       if (isSelected)
       {
        <option value="@rating.Value" Selected>@rating.Text</option>
       }
       else
       {
        <option value="@rating.Value">@rating.Text</option>
       }
      } 
    <span asp-validation-for="MPAA_RatingId" class="text-danger"></span>
    </select>
  </div>

        <div class="col-md-6">
            <label asp-for="TheaterId" class="form-label"></label>
            <select asp-for="TheaterId" class="form-select">
                <option value="">Select Theater</option>
                @foreach (var theater in ViewBag.Theaters as IEnumerable<SelectListItem>)
                { 
                    var isSelected = theater.Value == Model.TheaterId.ToString();
                    if (isSelected) 
                    {
                        <option value="@theater.Value" Selected>@theater.Text</option>
                    }
                    else 
                    {
                        <option value="@theater.Value">@theater.Text</option>
                    }
                   
                }
                <span asp-validation-for="TheaterId" class="text-danger"></span>
            </select>
        </div>
        <div class="d-flex justify-content-between align-items-baseline">
            <a asp-action="Index" class="btn btn-secondary">Back to List</a>
            <input type="submit" value="Save Changes" class="btn btn-primary">
        </div>
        </form>